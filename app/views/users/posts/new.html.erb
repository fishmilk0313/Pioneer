<div class ="container">
	<div class ="row">
		<div class ="create-topics col-xs-offset-1 col-xs-10 col-lg-8 col-lg-offset-2 text-center">
		<div class ="page-title text-center">
      		<h2><storong>足跡を記す</storong></h2>
    	</div>
    	 <%= render "users/shared/error_messages", resource: @post %>
    		<%= form_for(@post, url: users_posts_path, method: :post)do |f| %>
    			<div class ="new-post-image col-xs-12">
    					<%= attachment_image_tag(@topic, :image, fallback: "no-image.png", class:"new-image") %>
		 			<%= f.attachment_field :image %>
				</div>

    			<div class ="field col-xs-12">
		 		<%= f.label :"タイトル" %></br>
		 		<%= f.text_field :title, class: "form-control"  %>
		 	</div>

			<div class ="field body col-xs-12">
			 	<%= f.label :"本文" %></br>
		 		<%= f.text_area :text, class: "form-control",size: "20x10" %>
		 	</div>
		 	<div class ="col-xs-12 text-right">
					<%= f.label :"ジャンル" %>
 					<%= f.collection_select(:category_id, @categories, :id, :name, prompt: "-- 選択してください --") %>
 			</div>

			<div class ="actions col-xs-12">
		 		<%= f.submit "新規投稿", class: "btn-block btn-primary" %>
		 	</div>
			 <% end %>
			</div>
		</div>
	</div>
	<script>
$(function(){
    // inputのidから情報の取得
    $('#post_image').on('change', function (e) {
// ここから既存の画像のurlの取得
    var reader = new FileReader();
    reader.onload = function (e) {
        $(".image").attr('src', e.target.result);
    }
// ここまで
    reader.readAsDataURL(e.target.files[0]); //取得したurlにアップロード画像のurlを挿入
});
});

</script>
